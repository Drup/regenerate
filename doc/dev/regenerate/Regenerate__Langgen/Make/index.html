<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (regenerate.Regenerate__Langgen.Make)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">regenerate</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Regenerate__Langgen.Make</span></h1></header><h3 class="heading">Parameters</h3><div><div class="spec argument" id="argument-3-Sigma"><a href="#argument-3-Sigma" class="anchor"></a><div class="def argument"><code><a href="argument-3-Sigma/index.html">Sigma</a> : <a href="../index.html#module-type-SIGMA">SIGMA</a><span class="keyword"> with </span><span class="keyword">type </span><a href="argument-3-Sigma/index.html#type-t">t</a><span class="keyword"> = </span><a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></div><div class="doc"></div></div><div class="spec argument" id="argument-2-Segment"><a href="#argument-2-Segment" class="anchor"></a><div class="def argument"><code><a href="argument-2-Segment/index.html">Segment</a> : <a href="../../Segments/index.html#module-type-S">Segments.S</a><span class="keyword"> with </span><span class="keyword">type </span><a href="argument-2-Segment/index.html#type-elt">elt</a><span class="keyword"> = </span><a href="argument-1-Word/index.html#type-t">Word.t</a></code></div><div class="doc"></div></div><div class="spec argument" id="argument-1-Word"><a href="#argument-1-Word" class="anchor"></a><div class="def argument"><code><a href="argument-1-Word/index.html">Word</a> : <a href="../../Regenerate/Word/index.html#module-type-S">Regenerate.Word.S</a></code></div><div class="doc"></div></div></div><h3 class="heading">Signature</h3><div class="spec module" id="module-Word"><a href="#module-Word" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Word = <a href="index.html#argument-1-Word">Word</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Segment"><a href="#module-Segment" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Segment = <a href="index.html#argument-2-Segment">Segment</a></code></div><div class="doc"></div></div><div class="spec type" id="type-node"><a href="#type-node" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>node</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-node.Nothing" class="anchored"><td class="def constructor"><a href="#type-node.Nothing" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Nothing</span></code></td></tr><tr id="type-node.Everything" class="anchored"><td class="def constructor"><a href="#type-node.Everything" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Everything</span></code></td></tr><tr id="type-node.Cons" class="anchored"><td class="def constructor"><a href="#type-node.Cons" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Cons</span><span class="keyword"> of </span><a href="argument-2-Segment/index.html#type-t">Segment.t</a><span class="keyword"> * </span><a href="index.html#type-lang">lang</a></code></td></tr></table><code></code></div><div class="doc"><p>Spline of a language, a cascade-like thunk list with multiple nils.</p></div></div><div class="spec type" id="type-lang"><a href="#type-lang" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>lang</code><code><span class="keyword"> = </span>unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code><code></code></div><div class="doc"></div></div><p>Utilities</p><div class="spec val" id="val-segmentEpsilon"><a href="#val-segmentEpsilon" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>segmentEpsilon : <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-nothing"><a href="#val-nothing" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>nothing : unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code></div><div class="doc"></div></div><div class="spec val" id="val-everything"><a href="#val-everything" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>everything : unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code></div><div class="doc"></div></div><div class="spec val" id="val-(@:)"><a href="#val-(@:)" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>(@:) : <a href="argument-2-Segment/index.html#type-t">Segment.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code></div><div class="doc"></div></div><div class="spec val" id="val-langEpsilon"><a href="#val-langEpsilon" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>langEpsilon : unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code></div><div class="doc"></div></div><div class="spec module" id="module-IMap"><a href="#module-IMap" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="IMap/index.html">IMap</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Sigma_star"><a href="#module-Sigma_star" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Sigma_star/index.html">Sigma_star</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Precomputed full language. Used to replace &quot;Everything&quot; when need</p></div></div><div class="spec val" id="val-pp_item"><a href="#val-pp_item" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_item : <a href="argument-2-Segment/index.html#type-t">Segment.t</a> Fmt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-pp"><a href="#val-pp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp : Format.formatter <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><div class="spec val" id="val-of_list"><a href="#val-of_list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>of_list : <a href="argument-1-Word/index.html#type-t">Word.t</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><p>Classic operations</p><div class="spec val" id="val-union"><a href="#val-union" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>union : <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><div class="spec val" id="val-inter"><a href="#val-inter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>inter : <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><div class="spec val" id="val-difference_aux"><a href="#val-difference_aux" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>difference_aux : int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><div class="spec val" id="val-difference"><a href="#val-difference" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>difference : <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><div class="spec val" id="val-compl"><a href="#val-compl" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>compl : <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><p>Concatenation</p><p>Invariants for each language:
</p><ul><li><code class="code">nbSeg = List.length indices</code></li><li>After <code class="code">explode_head</code>, <code class="code">CCVector.size vec &gt;= n</code></li><li>if <code class="code">bound = Some n</code> then <code class="code">n &gt;= nbSeg</code> and <code class="code">seqₙ = Nothing</code>.</li></ul><div class="spec val" id="val-explode_head"><a href="#val-explode_head" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>explode_head : (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, CCVector.rw) CCVector.t <span class="keyword">&#8209;&gt;</span> ((unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a>)<span class="keyword"> * </span>int option<span class="keyword"> * </span>int<span class="keyword"> * </span>int list) <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a><span class="keyword"> * </span>int option<span class="keyword"> * </span>int<span class="keyword"> * </span>int list</code></div><div class="doc"></div></div><div class="spec val" id="val-concat_subterms_of_length"><a href="#val-concat_subterms_of_length" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>concat_subterms_of_length : n:int <span class="keyword">&#8209;&gt;</span> f:(a:<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a>) <span class="keyword">&#8209;&gt;</span> int list <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'c</span>) CCVector.t <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'d</span>) CCVector.t <span class="keyword">&#8209;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-combine_segments_left"><a href="#val-combine_segments_left" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>combine_segments_left : n:int <span class="keyword">&#8209;&gt;</span> int list <span class="keyword">&#8209;&gt;</span> (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, <span class="type-var">'a</span>) CCVector.t <span class="keyword">&#8209;&gt;</span> (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, <span class="type-var">'b</span>) CCVector.t <span class="keyword">&#8209;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-combine_segments_right"><a href="#val-combine_segments_right" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>combine_segments_right : n:int <span class="keyword">&#8209;&gt;</span> (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, <span class="type-var">'a</span>) CCVector.t <span class="keyword">&#8209;&gt;</span> int list <span class="keyword">&#8209;&gt;</span> (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, <span class="type-var">'b</span>) CCVector.t <span class="keyword">&#8209;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-concatenate"><a href="#val-concatenate" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>concatenate : <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><p>Star</p><div class="spec val" id="val-star_subterms_of_length"><a href="#val-star_subterms_of_length" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>star_subterms_of_length : max:int <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span><a href="argument-2-Segment/index.html#type-t">Segment.t</a>) list <span class="keyword">&#8209;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a> <a href="IMap/index.html#type-t">IMap.t</a> <span class="keyword">&#8209;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-star"><a href="#val-star" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>star : (unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a>) <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code></div><div class="doc"></div></div><div class="spec val" id="val-add_epsilonX"><a href="#val-add_epsilonX" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>add_epsilonX : int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><div class="spec val" id="val-dec"><a href="#val-dec" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>dec : int <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div><div class="spec val" id="val-rep_with_acc"><a href="#val-rep_with_acc" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>rep_with_acc : <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> int CCOpt.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><div class="spec val" id="val-rep"><a href="#val-rep" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>rep : int <span class="keyword">&#8209;&gt;</span> int CCOpt.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><p>Others</p><div class="spec val" id="val-charset"><a href="#val-charset" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>charset : bool <span class="keyword">&#8209;&gt;</span> <a href="argument-1-Word/index.html#type-char">Word.char</a> list <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code></div><div class="doc"></div></div><div class="spec val" id="val-gen"><a href="#val-gen" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>gen : <a href="argument-1-Word/index.html#type-char">Word.char</a> <a href="../../Regenerate/Regex/index.html#type-t">Regenerate.Regex.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a></code></div><div class="doc"></div></div><p>Exporting</p><div class="spec val" id="val-flatten_from"><a href="#val-flatten_from" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>flatten_from : int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> (<a href="argument-2-Segment/index.html#type-elt">Segment.elt</a> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><div class="spec val" id="val-flatten"><a href="#val-flatten" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>flatten : <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> (<a href="argument-2-Segment/index.html#type-elt">Segment.elt</a> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><div class="spec type" id="type-res"><a href="#type-res" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>res</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-res.Done" class="anchored"><td class="def constructor"><a href="#type-res.Done" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Done</span></code></td></tr><tr id="type-res.Finite" class="anchored"><td class="def constructor"><a href="#type-res.Finite" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Finite</span></code></td></tr><tr id="type-res.GaveUp" class="anchored"><td class="def constructor"><a href="#type-res.GaveUp" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">GaveUp</span></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec exception" id="exception-ExitSample"><a href="#exception-ExitSample" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">ExitSample</span></code></div><div class="doc"><p><code class="code">sample ~skip ~n lang</code> returns a sequence of on average <code class="code">n</code> elements.
<code class="code">lang</code> is only consumed when needed.</p><p>We sample one element every <code class="code">k</code>, where <code class="code">k</code> follows a power law of
average <code class="code">skip</code>. Furthermore, if we consume more than <code class="code">sqrt k</code> empty segments,
we assume that the rest of the segments will be infinitely empty and
stop.</p><p>If <code class="code">firsts</code> is provided, we always output the <code class="code">firsts</code> first elements.</p></div></div><div class="spec val" id="val-sample"><a href="#val-sample" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sample : ?&#8288;st:Random.State.t <span class="keyword">&#8209;&gt;</span> ?&#8288;n:int <span class="keyword">&#8209;&gt;</span> ?&#8288;firsts:int <span class="keyword">&#8209;&gt;</span> skip:int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-lang">lang</a> <span class="keyword">&#8209;&gt;</span> (<a href="argument-2-Segment/index.html#type-elt">Segment.elt</a> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-res">res</a></code></div><div class="doc"></div></div></body></html>